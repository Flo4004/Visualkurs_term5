#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QListWidget>
#include <QLabel>
#include <QLineEdit>
#include <QPushButton>
#include <QNetworkAccessManager>
#include <QSqlDatabase>
#include <QSqlQuery>
#include <QSqlError>
#include <QByteArray>
#include <QRegularExpression>
#include <QVBoxLayout>
#include <QNetworkRequest>
#include <QNetworkReply>
#include <QJsonDocument>
#include <QJsonObject>
#include <QPixmap>
#include <QLineEdit>
#include <QPushButton>
#include <QListWidget>
#include <QFile>
#include <QDir>
#include <QMessageBox>
#include <QJsonArray>
#include <QInputDialog>
#include <QMenu>
#include <QTextBrowser>
#include <QVBoxLayout>
#include <QNetworkRequest>
#include <QNetworkReply>
#include <QJsonDocument>
#include <QJsonObject>
#include <QPixmap>
#include <QMessageBox>
#include <QDir>
#include <QFile>
#include <QDialog>
#include <QTextEdit>
#include <QPushButton>
#include <QVBoxLayout>
#include <QEvent>
#include <QMouseEvent>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = nullptr);
    ~MainWindow();

private slots:
    void loadPlantList();
    void displayPlantInfo(QListWidgetItem *item);
    void loadPlantInfo();
    void parseWikipediaResponse(const QByteArray &data, const QString &plantName);

    void showContextMenu(const QPoint &pos);
    void editText();
    void updatePlantDescription(const QString &newDescription);
    void showFullImage();
protected:
    bool eventFilter(QObject *obj, QEvent *event) override;

private:
    Ui::MainWindow *ui;
    QSqlDatabase db;
    QNetworkAccessManager *networkManager;

    QString cleanFileName(const QString &fileName);
    QString info = "<html><head/><body><p>Добро пожаловать в приложение &quot;Энциклопедия растений&quot;. </p><p><br/></p><p>В этом приложение вы сможете добавлять в свою энциклопедию новые растения: их названия, изображение и краткую информацию о них.<br/><br/>Также, вы сможете просматривать растения, которые уже хранятся в вашей энциклопедии. Для просмотра текущих растений нажимайте на из названия в левой колонке.<br/><br/>Вы можете удалять растения из свой энциклопедии. Просто нажмите на растение слева, после чего нажмите на кнопку &quot;Удалить&quot; слева снизу.<br/><br/>Для редактирования текущего описания растения нажмите на текст с описанием ПКМ (правой кнопкой мыши) после чего на всплывающее сообщение &quot;Редактировать&quot; и вы сможете изменить текст. </p><p>Нажмите ЛКМ (левую кнопку мыши) по изображеню чтобы открыть изображение в отдельном окне.</p></body></html>";
    QString imageInfo = ":/icons/plant.png";
    QString header = "Информация";
    QString plantDescriptionHtml;
    QStringList keywords = {
        // "семейство", "род", "плодоношение", "цветение", "корневая система", "листовая пластинка",
        // "пестик", "тычинка", "пыльца", "опыление", "плоды", "семена", "цветок", "крона", "стебель",
        // "суккуленты", "хвойные", "лиственные", "кактусы", "папоротники", "многолетники", "однолетники",
        // "дикие растения", "лесные растения", "полевые растения", "водные растения", "травянистые",
        // "деревья", "кустарники", "плодоносящие растения", "паразитические растения", "сапрофиты", "вегетация", "анатомия растения", "морфология растения",
        // "цветковые растения", "нецветковые растения", "покров растения",
        // "классификация растений", "растениеводство", "гибрид растения", "культурные растения", "пыльцевые зёрна",
        // "опылители", "пестролистность", "полевые культуры", "гибридизация", "экология растений",
        // "растения с лечебными свойствами", "лекарственные растения", "растения-секреторы", "растения-хищники",
        // "симбиоз растений", "антогенез", "вегетативное размножение", "регенерация", "покровная ткань",
        // "проводящие ткани", "ксилема", "флоэма", "проводящая система", "покровная ткань", "листовая жилка",
        // "цветковая структура", "опыление ветром", "опыление насекомыми", "флора", "плодовые культуры",
        // "плодовые деревья", "грибы-симбионты", "воздушные корни", "пневматофоры", "суккулентные растения",
        // "фотосинтетические ткани", "флора тропиков", "растения с антимикробными свойствами", "пищевые растения", "кустарники",  "растение",
        "Акантовые",
        "Ахариевые",
        "Ахатокарповые",
        "Аирные",
        "Актинидиевые",
        "Адоксовые",
        "Экстоксиковые",
        "Аизовые",
        "Аизооновые",
        "Аканиевые",
        "Частуховые",
        "Альсевосмиевые",
        "Альстрёмериевые",
        "Алтингиевые",
        "Альтингиевые",
        "Амарантовые",
        "Амариллисовые",
        "Амборелловые",
        "Анакардиевые",
        "Сумаховые",
        "Анартриевые",
        "Анцистрокладовые",
        "Анизофиллеевые",
        "Анноновые",
        "Афанопеталовые",
        "Афлойевые",
        "Зонтичные",
        "Сельдерейные",
        "Сельдереевые",
        "Кутровые",
        "Аподантовые",
        "Апоногетоновые",
        "Падубовые",
        "Ароидные",
        "Аронниковые",
        "Аралиевые",
        "Пальмовые",
        "Арековые",
        "Аргофилловые",
        "Кирказоновые",
        "Аристолоховые",
        "Спаржевые",
        "Астелиевые",
        "Астеропейевые",
        "Астеропейные",
        "Атероспермовые",
        "Австробэйлиевые",
        "Баланоповые",
        "Баланофоровые",
        "Бальзаминовые",
        "Барбюйевые",
        "Барбейевые",
        "Базелловые",
        "Батовые",
        "Бегониевые",
        "Барбарисовые",
        "Берберидопсисовые",
        "Берёзовые",
        "Биберштейниевые",
        "Бигнониевые",
        "Биксовые",
        "Блендфордиевые",
        "Боннециевые",
        "Бурачниковые",
        "Бориевые",
        "Капустные",
        "Крестоцветные",
        "Бромелиевые",
        "Брунеллиевые",
        "Бруниевые",
        "Бурманниевые",
        "Бурзеровые",
        "Сусаковые",
        "Самшитовые",
        "Библисовые",
        "Кабомбовые",
        "Кактусовые",
        "Кальцеоляриевые",
        "Кальцеолариевые",
        "Калофилловые",
        "Каликантовые",
        "Калицеровые",
        "Колокольчиковые",
        "Кампинемовые",
        "Канелловые",
        "Коноплёвые",
        "Канновые",
        "Каперсовые",
        "Жимолостные",
        "Кардиоптерисовые",
        "Кариковые",
        "Карлеманниевые",
        "Кариокаровые",
        "Гвоздичные",
        "Казуариновые",
        "Бересклетовые",
        "Центролеписовые",
        "Центроплаковые",
        "Цефалотовые",
        "Роголистниковые",
        "Багрянниковые",
        "Хлорантовые",
        "Хризобалановые",
        "Цирцеастровые",
        "Ладанниковые",
        "Клеомовые",
        "Клетровые",
        "Клузиевые",
        "Безвременниковые",
        "Колумеллиевые",
        "Комбретовые",
        "Коммелиновые",
        "Сложноцветные",
        "Астровые",
        "Коннаровые",
        "Вьюнковые",
        "Кориариевые",
        "Кизиловые",
        "Корсиевые",
        "Коринокарповые",
        "Костусовые",
        "Толстянковые",
        "Кроссосомовые",
        "Ктенолофоновые",
        "Тыквенные",
        "Кунониевые",
        "Куртисиевые",
        "Циклантовые",
        "Цимодоцеевые",
        "Циномориевые",
        "Осоковые",
        "Цирилловые",
        "Подладанниковые",
        "Цитинусовые",
        "Волчелистниковые",
        "Дазипогоновые",
        "Датисковые",
        "Дегенериевые",
        "Диапенсиевые",
        "Дихапеталовые",
        "Дидиереевые",
        "Диллениевые",
        "Дионкофилловые",
        "Диоскорейные",
        "Диоскореевые",
        "Дипентодонтовые",
        "Диптерокарповые",
        "Дирахмовые",
        "Дориантовые",
        "Росянковые",
        "Росолистные",
        "Эбеновые",
        "Экдейоколеевые",
        "Лоховые",
        "Элеокарповые",
        "Повойничковые",
        "Эмблингиевые",
        "Вересковые",
        "Эриокаулоновые",
        "Эритроксиловые",
        "Эскаллониевые",
        "Эвкоммиевые",
        "Эукоммиевые",
        "Молочайные",
        "Эуфорбиевые",
        "Эуфрониевые",
        "Эвпоматиевые",
        "Эупоматиевые",
        "Эвптелейные",
        "Эуптелейные",
        "Буковые",
        "Флакуртиевые",
        "Флагелляриевые",
        "Флагеллариевые",
        "Фукьериевые",
        "Франкениевые",
        "Гарриевые",
        "Гейссоломовые",
        "Гельземиевые",
        "Горечавковые",
        "Гераниевые",
        "Геснериевые",
        "Гисекиевые",
        "Гомортеговые",
        "Гудениевые",
        "Гупиевые",
        "Крыжовниковые",
        "Груббиевые",
        "Гвамателовые",
        "Гуннеровые",
        "Гиростемоновые",
        "Гемодоровые",
        "Галофитовые",
        "Сланоягодниковые",
        "Гамамелисовые",
        "Гангуановые",
        "Гаптантовые",
        "Геликониевые",
        "Гельвингиевые",
        "Эрнандиевые",
        "Гимантандровые",
        "Гуаковые",
        "Гумириевые",
        "Гидателловые",
        "Гидноровые",
        "Гортензиевые",
        "Водокрасовые",
        "Гидролеевые",
        "Гидростахиевые",
        "Зверобойные",
        "Гипоксисовые",
        "Икациновые",
        "Ирисовые",
        "Ирвингиевые",
        "Итеевые",
        "Иксиолирионовые",
        "Иксонантовые",
        "Жуанвилеевые",
        "Ореховые",
        "Ситниковые",
        "Ситниковидные",
        "Триостенниковые",
        "Киркиевые",
        "Кёберлиниевые",
        "Крамериевые",
        "Лацистемовые",
        "Лакторисовые",
        "Яснотковые",
        "Ланариевые",
        "Лардизабаловые",
        "Лавровые",
        "Лецитисовые",
        "Бобовые",
        "Мотыльковые",
        "Пузырчатковые","Лепидоботриевые",
        "Лилейные",
        "Лимеевые",
        "Лимнантовые",
        "Льновые",
        "Линдерниевые",
        "Лоазовые",
        "Логаниевые",
        "Лофиокарповые",
        "Ремнецветниковые",
        "Ремнецветные",
        "Ловиевые",
        "Дербенниковые",
        "Магнолиевые",
        "Мальпигиевые",
        "Мальвовые",
        "Марантовые",
        "Маркгравиевые",
        "Мартиниевые",
        "Майяковые",
        "Мелантиевые",
        "Меластомовые",
        "Мелиевые",
        "Мелиантовые",
        "Луносемянниковые",
        "Вахтовые",
        "Меттениусовые",
        "Мизодендровые",
        "Митрастемоновые",
        "Моллюгиновые",
        "Мутовчатковые",
        "Монимиевые",
        "Монтиевые",
        "Монтиниевые",
        "Тутовые",
        "Моринговые",
        "Мунтингиевые",
        "Банановые",
        "Миодокарповые",
        "Восковницевые",
        "Мириковые",
        "Мускатниковые",
        "Миротамновые",
        "Миртовые",
        "Нартециевые",
        "Лотосовые",
        "Непентесовые",
        "Непентовые",
        "Неурадовые",
        "Селитрянковые",
        "Нотофаговые",
        "Нотофагусовые",
        "Никтагиновые",
        "Ночецветные",
        "Кувшинковые",
        "Нимфейные",
        "Охновые",
        "Олаксовые",
        "Маслиновые",
        "Кипрейные",
        "Онкотековые",
        "Опилиевые",
        "Орхидные",
        "Заразиховые",
        "Кисличные",
        "Пионовые",
        "Пандовые",
        "Пандановые",
        "Панданусовые",
        "Маковые",
        "Паракрифиевые",
        "Страстоцветные",
        "Пассифлоровые",
        "Павловниевые",
        "Кунжутовые",
        "Пенеевые",
        "Пеннантиевые",
        "Пентадипландровые",
        "Пентафрагмовые",
        "Пентафилаксовые",
        "Пенторовые",
        "Перовые",
        "Перидисковые",
        "Петенеевые",
        "Петерманниевые",
        "Петросавиевые",
        "Феллиновые",
        "Филезиевые",
        "Филидровые",
        "Фримовые",
        "Филлантовые",
        "Филлономовые",
        "Физеновые",
        "Лаконосовые",
        "Лаконосные",
        "Фитолакковые",
        "Пикрамниевые",
        "Пикродендровые",
        "Перечные",
        "Перцевые",
        "Смолосемянниковые",
        "Питтоспоровые",
        "Подорожниковые",
        "Платановые",
        "Плокоспермовые",
        "Свинчатковые",
        "Плюмбаговые",
        "Злаки",
        "Мятликовые",
        "Подостемовые",
        "Синюховые",
        "Истодовые",
        "Гречишные",
        "Гречиховые",
        "Понтедериевые",
        "Портулаковые",
        "Посидониевые",
        "Рдестовые",
        "Первоцветные",
        "Примуловые",
        "Протейные",
        "Путрандживовые",
        "Квиллайевые",
        "Квиллаховые",
        "Раффлезиевые",
        "Лютиковые",
        "Рапатеевые",
        "Резедовые",
        "Рестиевые",
        "Рабродендровые",
        "Крушиновые",
        "Жостеровые",
        "Рипогоновые",
        "Ризофоровые",
        "Роридуловые",
        "Розовые",
        "Руссеевые",
        "Мареновые",
        "Руппиевые",
        "Рутовые",
        "Сабиевые",
        "Ивовые",
        "Сальвадоровые",
        "Санталовые",
        "Сапиндовые",
        "Сапотовые",
        "Саркобатовые",
        "Сарколеновые",
        "Саррацениевые",
        "Савруровые",
        "Камнеломковые",
        "Шейхцериевые",
        "Лимонниковые",
        "Шлегелиевые",
        "Шёпфиевые",
        "Норичниковые",
        "Сетчеллантовые",
        "Симарубовые",
        "Симмондсиевые",
        "Сипаруновые",
        "Сладениевые",
        "Смилаксовые",
        "Паслёновые",
        "Сферосепаловые",
        "Сфеноклеевые",
        "Стахиуровые",
        "Клекачковые",
        "Стафилеевые",
        "Стегноспермовые",
        "Стемоновые",
        "Стемонуровые",
        "Стильбовые",
        "Страсбургериевые",
        "Стрелитциевые",
        "Стилидиевые",
        "Стираксовые",
        "Суриановые",
        "Симплоковые",
        "Талиновые",
        "Тамарисковые",
        "Гребенщиковые",
        "Таписциевые",
        "Текофилеевые",
        "Тетрахондровые",
        "Тетрамелесовые",
        "Тетрамеристовые",
        "Чайные",
        "Томандерсиевые",
        "Турниевые",
        "Волчниковые",
        "Волчеягодниковые",
        "Тикодендровые",
        "Тофилдиевые",
        "Торричеллиевые",
        "Товариевые",
        "Тригониевые",
        "Тримениевые",
        "Триурисовые",
        "Троходендровые",
        "Настурциевые",
        "Рогозовые",
        "Ильмовые",
        "Крапивные",
        "Валиевые",
        "Веллозиевые",
        "Вербеновые",
        "Фиалковые",
        "Виноградные",
        "Виноградовые",
        "Вивианиевые",
        "Вошизиевые",
        "Винтеровые",
        "Ксанторреевые",
        "Ксеронемовые",
        "Ксирисовые",
        "Имбирные",
        "Взморниковые",
        "Зостеровые",
        "Парнолистниковые",
        "Зигофилловые",
        "Шиповник"
    };
};

#endif // MAINWINDOW_H
